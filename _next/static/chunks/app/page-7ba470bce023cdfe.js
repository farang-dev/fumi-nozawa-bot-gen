(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{439:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(5155),n=s(2115),o=s(9840),i=s.n(o),l=s(9509);let r=()=>{let[e,t]=(0,n.useState)([]),[s,o]=(0,n.useState)(""),[r,c]=(0,n.useState)(!1),h=(0,n.useRef)(null);(0,n.useEffect)(()=>{t([{role:"assistant",content:"\n        <div class=\"welcome-text\">Welcome! I'm here to share Masafumi Nozawa's background. Please choose an option:</div>\n      "}])},[]),(0,n.useEffect)(()=>{var e;null===(e=h.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[e,r]);let u=e=>{let t=e.replace(/\n/g,"<br/>"),s=/(\d+\.\s[^\n]+)/g,a=t.match(s);if(a){let e="<ol>";a.forEach(t=>{let[,s]=t.match(/\d+\.\s(.*)/);e+="<li>".concat(s,"</li>")}),e+="</ol>",t=t.replace(s,e)}let n=/(-\s[^\n]+)/g,o=t.match(n);if(o){let e="<ul>";o.forEach(t=>{let[,s]=t.match(/-\s(.*)/);e+="<li>".concat(s,"</li>")}),e+="</ul>",t=t.replace(n,e)}return t.replace(/(\w+?:)/g,"<strong>$1</strong>")},d=async e=>{c(!0);let t=Date.now();try{let s=await fetch(l.env.NEXT_PUBLIC_API_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:e})}),a=await s.json(),n=a.text||a.message||"Sorry, I couldnâ€™t process that.",o=Date.now()-t;return o<1e3&&await new Promise(e=>setTimeout(e,1e3-o)),u(n)}catch(e){return console.error("Error calling Flowise API:",e),"Error: Failed to get a response."}finally{c(!1)}},_=async e=>{if(e.preventDefault(),!s.trim())return;let a={role:"user",content:s};t(e=>[...e,a]),o("");let n={role:"assistant",content:await d(s)};t(e=>[...e,n])},m=async e=>{let s={1:{query:"Who is Masafumi Nozawa?",display:"Who is Masafumi Nozawa?"},2:{query:"What are his services? List his services from 1 - 5",display:"What are his services?"},3:{query:"What is his skillset?",display:"What is his skillset?"},4:{query:"Show his contact information except for github",display:"His Contact Information"}}[e];if(!s)return;let a={role:"user",content:s.display};t(e=>[...e,a]);let n={role:"assistant",content:await d(s.query)};t(e=>[...e,n])};return(0,a.jsxs)("div",{className:i().chatContainer,children:[(0,a.jsx)("div",{className:i().header,children:(0,a.jsx)("h1",{onClick:()=>{window.location.reload()},style:{cursor:"pointer"},children:"Masafumi Nozawa"})}),(0,a.jsxs)("div",{className:i().chatWindow,children:[e.map((e,t)=>(0,a.jsxs)("div",{className:"user"===e.role?i().userMessage:0===t?i().welcomeMessage:i().botMessage,children:[(0,a.jsx)("div",{className:i().messageContent,dangerouslySetInnerHTML:{__html:e.content}}),0===t&&"assistant"===e.role&&(0,a.jsxs)("div",{className:i().options,children:[(0,a.jsx)("button",{onClick:()=>m("1"),children:"1. Who is Masafumi Nozawa?"}),(0,a.jsx)("button",{onClick:()=>m("2"),children:"2. What are his services?"}),(0,a.jsx)("button",{onClick:()=>m("3"),children:"3. What is his skillset?"}),(0,a.jsx)("button",{onClick:()=>m("4"),children:"4. His Contact Information"})]})]},t)),r&&(0,a.jsx)("div",{className:i().loadingMessage,children:(0,a.jsxs)("div",{className:i().loadingDots,children:[(0,a.jsx)("span",{}),(0,a.jsx)("span",{}),(0,a.jsx)("span",{})]})}),(0,a.jsx)("div",{ref:h})]}),(0,a.jsxs)("form",{onSubmit:_,className:i().inputForm,children:[(0,a.jsx)("input",{type:"text",value:s,onChange:e=>o(e.target.value),placeholder:"Type your message...",className:i().input}),(0,a.jsx)("button",{type:"submit",className:i().sendButton,children:"Send"})]})]})}},1108:(e,t,s)=>{Promise.resolve().then(s.bind(s,439))},9840:e=>{e.exports={chatContainer:"Chat_chatContainer__mFXij",header:"Chat_header__RCVJ0",chatWindow:"Chat_chatWindow__mnRdl",welcomeMessage:"Chat_welcomeMessage__eNAHm",botMessage:"Chat_botMessage__JFJDI",userMessage:"Chat_userMessage__6qato",fadeIn:"Chat_fadeIn__f2twK","welcome-text":"Chat_welcome-text__6PX_A","options-list":"Chat_options-list__L921c",messageContent:"Chat_messageContent__eO7cX",options:"Chat_options__ASxh_",inputForm:"Chat_inputForm__NqW2T",input:"Chat_input__75_dM",sendButton:"Chat_sendButton__zY4Mb",loadingMessage:"Chat_loadingMessage__dbtoD",loadingDots:"Chat_loadingDots__b7w_s",bounce:"Chat_bounce__eZ_tU"}}},e=>{var t=t=>e(e.s=t);e.O(0,[583,441,684,358],()=>t(1108)),_N_E=e.O()}]);